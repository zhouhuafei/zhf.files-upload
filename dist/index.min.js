"use strict";var extend=require("zhf.extend"),getDomArray=require("zhf.get-dom-array");function ImgUpload(t){this.opts=extend({input:null,limitNum:5,changeCallback:function(){console.log("no find changeCallback")},base64Callback:function(){console.log("no find base64Callback")}},t),this.opts.input?this.init():console.log("no find input")}ImgUpload.prototype.init=function(){this.render(),this.power()},ImgUpload.prototype.render=function(){},ImgUpload.prototype.power=function(){this.events()},ImgUpload.prototype.events=function(){this.eventsInputChange()},ImgUpload.prototype.eventsInputChange=function(){var t=this,e=this.opts.limitNum;getDomArray(this.opts.input)[0].addEventListener("change",function(){var a=0;t.imgData=[];for(var n=this.files,o=n.length,i=0;i<o;i++){var s=n[i];/image/gi.test(s.type)&&a<e&&(t.imgData.push(s),a++)}t.opts.changeCallback({imgData:t.imgData}),t.fileReadAsDataURL(t.imgData)})},ImgUpload.prototype.fileReadAsDataURL=function(t){var e=this;t.forEach(function(t,a){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",function(){e.opts.base64Callback({base64:this.result,index:a})})})},module.exports=ImgUpload;